# 楽観的UI更新（Optimistic UI）
サーバの更新を待たずして、画面に変更を反映させる手法のこと。  
- ほとんどの場合に処理が成功する
- ユーザを待たせることにUX的な不都合が生じる

場合に、有効な手法となる。  
パフォーマンスチューニングというよりも、UX的に必要な要件として組み込まれるものである。  


例えばLINEのメッセージ送信機能は、ユーザがテキストを入力して送信ボタンを押すと画面に即反映される。
ここにも楽観的UI更新は採用されているはずである。（おそらく、おおよそのチャットツールには楽観的UI更新が採用されていはず。）  

もし楽観的UI更新を採用しない場合を考えてみる。  
その場合、  
1. メッセージがDBに登録される
2. DBから最新のメッセージ群を取得する   

といった動きになるが、これだとネットワークに遅延が発生する際に画面への反映が遅くなる。
「データを登録する」&「登録後のデータをフェッチする」といった処理が行われている間は、通常ローディング表示をするなどしてユーザを待たせるからである。  
もちろん「個人情報登録」のような、重要なデータを登録する際はそういったインタラクションの方がユーザは安心すると思うが、
「メッセージ送信」といった手軽な操作の場合、むしろユーザは即時に画面に反映されるのが当然という共通認識のため、ローディングが走ること自体にもストレスを感じてしまう。そういう意味で、楽観的UI更新が効果的な場面では積極的に採用するべきだと思う。  

チャット以外の例で言うと、Google Calendarはカレンダーの予定の作成が即時に画面に反映されているが、あれも楽観的UI更新が裏側で行われていると思う。  

## 実装

（#TODO: 愚直な実装を書く）

[redux-optimistic](https://github.com/ForbesLindesay/redux-optimist) という、Reduxと併用するライブラリがある。



## 参考
- [処理の遅さを感じさせないUIデザインのひと工夫 - 楽観的UIの基本](https://ic-root.com/blog/optimistic-1000/)
- [Optimistic UI Update in React](https://medium.com/@_erikaybar/optimistic-ui-updates-in-react-9e139ffa2e45)